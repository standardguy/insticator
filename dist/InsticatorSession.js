!function i(o,r,s){function a(n,e){if(!r[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);throw(t=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",t}t=r[n]={exports:{}},o[n][0].call(t.exports,function(e){return a(o[n][1][e]||e)},t,t.exports,i,o,r,s)}return r[n].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,n,t){var i,o,r,s;i=function(){function a(){for(var e=0,n={};e<arguments.length;e++){var t,i=arguments[e];for(t in i)n[t]=i[t]}return n}function c(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(u){function s(){}function t(e,n,t){if("undefined"!=typeof document){"number"==typeof(t=a({path:"/"},s.defaults,t)).expires&&(t.expires=new Date(+new Date+864e5*t.expires)),t.expires=t.expires?t.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=u.write?u.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,r="";for(o in t)t[o]&&(r+="; "+o,!0!==t[o]&&(r+="="+t[o].split(";")[0]));return document.cookie=e+"="+n+r}}function n(e,n){if("undefined"!=typeof document){for(var t={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var r=i[o].split("="),s=r.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var a=c(r[0]),s=(u.read||u)(s,a)||c(s);if(n)try{s=JSON.parse(s)}catch(e){}if(t[a]=s,e===a)break}catch(e){}}return e?t[e]:t}}return s.set=t,s.get=function(e){return n(e,!1)},s.getJSON=function(e){return n(e,!0)},s.remove=function(e,n){t(e,"",a(n,{expires:-1}))},s.defaults={},s.withConverter=e,s}(function(){})},"function"==typeof define&&define.amd&&(define(i),o=!0),"object"==typeof t&&(n.exports=i(),o=!0),o||(r=window.Cookies,(s=window.Cookies=i()).noConflict=function(){return window.Cookies=r,s})},{}],2:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e("./session").getSession()},{"./session":3}],3:[function(e,n,t){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.expires=t.defaultSession=t.newDaySession=t.updateSession=t.setDefaultSession=t.getSession=void 0;var r=o(e("js-cookie")),s=e("./utils"),a=Date.now()+18e5;t.expires=a;var u=r.default.getJSON("instaSession"),c={id:"awd34!@a754",expiration:new Date(a).toString(),referrer:document.referrer,campaign:"summer_mailer"};t.defaultSession=c;function f(){var e=(e=s.getCampaign(document))||c.campaign,e=i(i({},c),{campaign:e});r.default.set("instaSession",e),console.log("Fist session: %o",r.default.getJSON("instaSession"))}t.setDefaultSession=f;function d(e){var n="",t=s.getCampaign(document);null!==t&&t!==e.campaign&&(e.id=s.newSession(e.id),e.campaign=t,n=" (Campaign)"),s.isExpired(e.expiration)&&(e.id=s.newSession(e.id),n=" (Expired)"),e=i(i({},e),{referrer:document.referrer,expiration:new Date(a).toString()}),r.default.set("instaSession",e),console.log("Updated session%s:%o",n,r.default.getJSON("instaSession"))}t.updateSession=d;t.newDaySession=function(e){e=i(i({},e),{id:s.newSession(e.id),expiration:new Date(a).toString()}),r.default.set("instaSession",e),console.log("New day session: %o",r.default.getJSON("instaSession")),s.resetAtMidnight()};t.getSession=function(){s.resetAtMidnight(),null==u?f():d(u)}},{"./utils":4,"js-cookie":1}],4:[function(e,n,t){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resetAtMidnight=t.isExpired=t.getCampaign=t.newSession=t.sessionTimer=void 0;function o(e,n){var t=new Date,t=e.getTime()-t.getTime();setTimeout(function(){n(r.default.getJSON("instaSession"))},t)}var r=i(e("js-cookie")),s=e("./session");t.sessionTimer=o;t.resetAtMidnight=function(){var e=new Date,e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0);console.log("Setting new day timer!!!!"),o(e,s.newDaySession)};t.newSession=function(e){return e+"-"+(Math.floor(11*Math.random())+1)};t.getCampaign=function(e){e=e.location.search.split("=")[1];return e&&0<e.length?e:null};t.isExpired=function(e){return 0<Date.now()-new Date(e).getTime()}},{"./session":3,"js-cookie":1}]},{},[2]);
//# sourceMappingURL=InsticatorSession.js.map
